<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Transition — Fuzzy → Fabric</title>
  <link rel="stylesheet" href="transition.css?v=12">
</head>
<body>
  <a href="index.html" class="back-button">← Back</a>
  <div class="transition-label" aria-hidden="true">Moving from Fuzzy to Fabric</div>

  <main class="stage" aria-label="Transition video from Fuzzy to Fabric">
    <video id="vid" src="fuzzy-fabric.mp4" autoplay playsinline muted></video>
    <button id="skip" class="skip" type="button">Skip</button>
    <div id="fade" class="fade" aria-hidden="true"></div>
  </main>

  <script>
    const DEST = 'fabric.html';
    const vid = document.getElementById('vid');
    const skip = document.getElementById('skip');
    const fade = document.getElementById('fade');

    // Show Skip after 2.5s
    const showDelay = 2500;
    let timer = setTimeout(()=> skip.classList.add('show'), showDelay);

    const go = () => { fade.classList.add('in'); setTimeout(()=>location.href = DEST, 250); };

    // End → advance
    vid.addEventListener('ended', go);
    // Skip → advance
    skip.addEventListener('click', go);

    // Fallback: if video fails, offer immediate skip
    vid.addEventListener('error', () => skip.classList.add('show'));
  </script>
</body>
</html>
